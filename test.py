import streamlit as st
import random

st.set_page_config(page_title="심리 기반 영화 추천 🎬", page_icon="🎭")

st.title("🎬 내 마음을 위한 영화 추천기")
st.write("당신의 현재 심리 상태를 선택하면, 어울리는 영화를 추천해드릴게요! 💡")

# 심리 상태 선택
mood = st.radio(
    "지금 기분은 어떤가요? 😌",
    ["행복 😊", "우울 😔", "스트레스 😵", "지루함 😐", "설렘 💖", "고독 🥀"]
)

energy = st.selectbox(
    "오늘의 에너지 상태는 어떤가요? 🔋",
    ["넘치는 편 ⚡", "보통 🙂", "지친 상태 💤"]
)

genre = st.multiselect(
    "좋아하는 장르를 선택해주세요 🍿",
    ["로맨스 💕", "코미디 😂", "드라마 🎭", "스릴러 🔪", "SF 🚀", "애니메이션 🐭"]
)

# 심리별 영화 데이터 (장르 포함)
recommendations = {
    "행복 😊": [
        ("인사이드 아웃", "애니메이션 🐭"),
        ("라라랜드", "로맨스 💕"),
        ("어바웃 타임", "로맨스 💕"),
        ("주토피아", "애니메이션 🐭"),
        ("박물관이 살아있다", "코미디 😂")
    ],
    "우울 😔": [
        ("월터의 상상은 현실이 된다", "드라마 🎭"),
        ("포레스트 검프", "드라마 🎭"),
        ("리틀 미스 선샤인", "코미디 😂")
    ],
    "스트레스 😵": [
        ("업", "애니메이션 🐭"),
        ("주토피아", "애니메이션 🐭"),
        ("해리포터", "판타지 ✨"),
        ("박물관이 살아있다", "코미디 😂")
    ],
    "지루함 😐": [
        ("인터스텔라", "SF 🚀"),
        ("인셉션", "SF 🚀"),
        ("매트릭스", "SF 🚀"),
        ("아바타", "SF 🚀")
    ],
    "설렘 💖": [
        ("너의 이름은", "로맨스 💕"),
        ("비포 선라이즈", "로맨스 💕"),
        ("어바웃 타임", "로맨스 💕")
    ],
    "고독 🥀": [
        ("허", "드라마 🎭"),
        ("비긴 어게인", "드라마 🎭"),
        ("굿 윌 헌팅", "드라마 🎭")
    ]
}

# 버튼 클릭 시 영화 추천
if st.button("영화 추천 받기 🎥"):
    movie_list = recommendations[mood]

    # 장르 선택이 있으면 필터링
    if genre:
        filtered = [m for m in movie_list if m[1] in genre]
        if filtered:
            movie = random.choice(filtered)
            st.success(f"✨ 오늘의 추천 영화는 **{movie[0]}** 입니다! ({movie[1]})")
        else:
            st.info("해당 기분과 선택한 장르가 맞는 영화가 없어요 😢 다른 장르도 선택해보세요!")
    else:
        movie = random.choice(movie_list)
        st.success(f"✨ 오늘의 추천 영화는 **{movie[0]}** 입니다! ({movie[1]})")
